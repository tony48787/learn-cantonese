const mongoose = require('mongoose');

// Use native promises (or else mongoose will warn about a deprecated implementation)
mongoose.Promise = global.Promise;  

const dbDomain = "localhost";
const dbName = "learn-cantonese";
const dbUri = "mongodb://" + dbDomain + "/" + dbName;

mongoose.connect(dbUri);

const db = mongoose.connection;

db.on('error', function(err) {
  console.log("Connection error: " + err);
});

db.once('open', function() {
  console.log("Connected to " + dbName);
});

// Note: On some terminal, SIGINT might not be generated by pressing CTRL-C
process.on('SIGINT', function() {
  mongoose.connection.close(function() {
    console.log('Mongoose disconnected via app termination');
    process.exit(0);
  });
});

